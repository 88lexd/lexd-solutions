---
- name: Check if /data exist
  stat:
    path: /data
  register: data_mount_path

- name: Create path for GlusterFS to mount
  file:
    path: /data
    state: directory
  when: not data_mount_path.stat.exists

- name: Mount GlusterFS
  ansible.posix.mount:
    path: /data
    src: "localhost:/k8s-volume"
    fstype: glusterfs
    state: mounted